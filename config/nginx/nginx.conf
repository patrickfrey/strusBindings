worker_processes auto;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
	worker_connections  1024;
}

http {
	include mime.types;
	default_type       application/octet-stream;
	access_log         /var/log/nginx/access.log;

	sendfile on;

	client_max_body_size 13m;

	fastcgi_buffers 16 16k;
	fastcgi_buffer_size 32k;

	index              index.php index.html index.htm;

	# List of application servers
	upstream app_servers {
		server unix:/var/run/php5-fpm.sock;
	}

	# Configuration for the server
	server {

		# Running port
		listen 80;

		# Proxying the connections connections
		location / {
			proxy_pass         http://app_servers;
			proxy_redirect     off;
			proxy_set_header   Host $host;
			proxy_set_header   X-Real-IP $remote_addr;
			proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header   X-Forwarded-Host $server_name;
		}
	}
}



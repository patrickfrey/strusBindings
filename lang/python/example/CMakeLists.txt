cmake_minimum_required( VERSION 2.6 FATAL_ERROR )

set( THISDIR "${PROJECT_SOURCE_DIR}/lang/python/example" )
set( tests helloWorld createCollection query queryexpr status )

if( CMAKE_MAJOR_VERSION GREATER 2 OR CMAKE_MINOR_VERSION GREATER 6 )
	foreach( test ${tests} )
		add_test( NAME python_${test} COMMAND /usr/bin/env python2 ${test}.py WORKING_DIRECTORY ${THISDIR} )
		set_tests_properties( python_${test} PROPERTIES ENVIRONMENT "PYTHONPATH=${PROJECT_SOURCE_DIR}/lang/python" )
	endforeach( test )
else( CMAKE_MAJOR_VERSION GREATER 2 OR CMAKE_MINOR_VERSION GREATER 6 )
	add_test( python_helloWorld /usr/bin/env python2 helloWorld.py WORKING_DIRECTORY ${THISDIR} )
	add_test( python_createCollection /usr/bin/env python2 createCollection.py WORKING_DIRECTORY ${THISDIR} )
	add_test( python_query /usr/bin/env python2 query.py WORKING_DIRECTORY ${THISDIR} )
	add_test( python_queryexpr /usr/bin/env python2 queryexpr.py WORKING_DIRECTORY ${THISDIR} )
	add_test( python_status /usr/bin/env python2 status.py WORKING_DIRECTORY ${THISDIR} )
	set_tests_properties( python_helloWorld PROPERTIES ENVIRONMENT "PYTHONPATH=${PROJECT_SOURCE_DIR}/lang/python" )
	set_tests_properties( python_createCollection PROPERTIES ENVIRONMENT "PYTHONPATH=${PROJECT_SOURCE_DIR}/lang/python" )
	set_tests_properties( python_query PROPERTIES ENVIRONMENT "PYTHONPATH=${PROJECT_SOURCE_DIR}/lang/python" )
	set_tests_properties( python_queryexpr PROPERTIES ENVIRONMENT "PYTHONPATH=${PROJECT_SOURCE_DIR}/lang/python" )
	set_tests_properties( python_status PROPERTIES ENVIRONMENT "PYTHONPATH=${PROJECT_SOURCE_DIR}/lang/python" )
endif( CMAKE_MAJOR_VERSION GREATER 2 OR CMAKE_MINOR_VERSION GREATER 6 )


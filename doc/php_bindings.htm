<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><link rel="icon" type="image/ico" href="images/strus.ico"/><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="description" content="Language bindings PHP for strus, a collection of C++ libraries for building a full-text search engine."/><meta name="keywords" content="fulltext search engine C++"/><meta name="author" content="Patrick Frey &lt;patrickpfrey (a) yahoo (dt) com&gt;"/><link rel="stylesheet" type="text/css" href="text-profile.css" title="Text Profile" media="all"/><title>PHP bindings for strus</title></head><body><div id="wrap"><div id="content"><h2>Object description</h2><p class="description">This section describes the objects of the strus PHP bindings
		with examples of how to create and use them. Because PHP is a value typed language
		with no explicit typeing we refer to the type of an object that exists only as 
		a single instance in the context by using the name of the object type starting with
		a lower case letter as name of the variable. The snippet
		<pre>
                        $query = $queryEval-&gt;createQuery( $storage);
		</pre>
		States the construction of an object of type <i>Query</i> with the name <i>query</i>
		by an object of type <i>QueryEval</i> with name <i>queryEval</i> with the parameter
		of type <i>Storage</i> named <i>storage</i>.
		</p><h3>Term</h3><p class="description">Single term occurrence in the document</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>type</b></td><td valign="top" align="left">string</td><td valign="top" align="left"/><td valign="top" align="left">Get the type name ot the term</td></tr><tr><td valign="top" align="left"><b>value</b></td><td valign="top" align="left">string</td><td valign="top" align="left"/><td valign="top" align="left">Get the value ot the term</td></tr><tr><td valign="top" align="left"><b>position</b></td><td valign="top" align="left">int</td><td valign="top" align="left"/><td valign="top" align="left">Get the word count position ot the term</td></tr></table><h3>MetaData</h3><p class="description"/><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>name</b></td><td valign="top" align="left">string</td><td valign="top" align="left"/><td valign="top" align="left">Get the name of the document meta data element</td></tr><tr><td valign="top" align="left"><b>value</b></td><td valign="top" align="left">Variant</td><td valign="top" align="left"/><td valign="top" align="left">Get the value of the document meta data element</td></tr></table><h3>Attribute</h3><p class="description">Attribute of a document</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>name</b></td><td valign="top" align="left">string</td><td valign="top" align="left"/><td valign="top" align="left">Get the name of the document attribute</td></tr><tr><td valign="top" align="left"><b>value</b></td><td valign="top" align="left">string</td><td valign="top" align="left"/><td valign="top" align="left">Get the value of the document attribute</td></tr></table><h3>Document</h3><p class="description">Document definition</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>addSearchIndexTerm</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>type</b>:  term type name of the search index term<br/><b>value</b>:  term value of the search index term<br/><b>position</b>:  word count position of the search index term<br/></td><td valign="top" align="left">Add a single term occurrence to the document for retrieval (inverted index)</td></tr><tr><td valign="top" align="left"><b>addForwardIndexTerm</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>type</b>:  term type name of the forward index term<br/><b>value</b>:  term value of the forward index term<br/><b>position</b>:  word count position of the forward index term<br/></td><td valign="top" align="left">Add a single term occurrence to the document for summarization (forward index)</td></tr><tr><td valign="top" align="left"><b>setMetaData</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>name</b>:  name ot the meta data element<br/><b>value</b>:  value of the meta data element<br/></td><td valign="top" align="left">Define a meta data table element value of the document for query restrictions and summarization</td></tr><tr><td valign="top" align="left"><b>setAttribute</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>name</b>:  name of the document attribute<br/><b>value</b>:  value of the document attribute<br/></td><td valign="top" align="left">Define an attribute of the document for summarization</td></tr><tr><td valign="top" align="left"><b>setUserAccessRight</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>username</b>:  name of user that is allowed to access this document<br/></td><td valign="top" align="left">Allow a user to access the document</td></tr><tr><td valign="top" align="left"><b>setDocid</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>docid</b>:  identifier of the document<br/></td><td valign="top" align="left">Set the document identifier (docid) of the document</td></tr><tr><td valign="top" align="left"><b>searchIndexTerms</b></td><td valign="top" align="left">Term[]</td><td valign="top" align="left"/><td valign="top" align="left">Get the list of search terms of this document</td></tr><tr><td valign="top" align="left"><b>forwardIndexTerms</b></td><td valign="top" align="left">Term[]</td><td valign="top" align="left"/><td valign="top" align="left">Get the list of forward terms of this document</td></tr><tr><td valign="top" align="left"><b>metaData</b></td><td valign="top" align="left">MetaData[]</td><td valign="top" align="left"/><td valign="top" align="left">Get the list of meta data of this document</td></tr><tr><td valign="top" align="left"><b>attributes</b></td><td valign="top" align="left">Attribute[]</td><td valign="top" align="left"/><td valign="top" align="left">Get the list of attributes of this document</td></tr><tr><td valign="top" align="left"><b>users</b></td><td valign="top" align="left">string[]</td><td valign="top" align="left"/><td valign="top" align="left">Get the list of users that are allowed to access this document</td></tr><tr><td valign="top" align="left"><b>docid</b></td><td valign="top" align="left">string</td><td valign="top" align="left"/><td valign="top" align="left">Get the document identifier (docid) of the document</td></tr></table><h3>DocumentAnalyzer</h3><p class="description">Analyzer object representing a program for segmenting, tokenizing and normalizing a document into its atomic parts, that can be inserted into a storage and be retrieved from there.</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>addSearchIndexFeature</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>type</b>:  type type of the features produced<br/><b>selectexpr</b>:  expression selecting the elements to fetch for producing this feature<br/><b>tokenizer</b>:  tokenizer function description as list of strings (first element is the function name, the following elements are the parameters) to use for this feature<br/><b>normalizers</b>:  list of normalizer function descriptions  as list of strings (first element is the function name, the following elements are the parameters) to use for this feature in the ascending order of appearance<br/><b>options</b>:  list of options as strings, one of {"BindPosPred" =&gt; the position is bound to the preceeding feature, "BindPosSucc" =&gt; the position is bound to the succeeding feature<br/></td><td valign="top" align="left">Define how a feature to insert into the inverted index (search index) is selected, tokenized and normalized</td></tr><tr><td valign="top" align="left"><b>addForwardIndexFeature</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>type</b>:  type type of the features produced<br/><b>selectexpr</b>:  expression selecting the elements to fetch for producing this feature<br/><b>tokenizer</b>:  tokenizer function description as list of strings (first element is the function name, the following elements are the parameters) to use for this feature<br/><b>normalizers</b>:  list of normalizer function descriptions as list of strings (first element is the function name, the following elements are the parameters) to use for this feature in the ascending order of appearance<br/><b>options</b>:  list of options as strings, one of {"BindPosPred" =&gt; the position is bound to the preceeding feature, "BindPosSucc" =&gt; the position is bound to the succeeding feature<br/></td><td valign="top" align="left">Define how a feature to insert into the forward index (for summarization) is selected, tokenized and normalized</td></tr><tr><td valign="top" align="left"><b>defineMetaData</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>fieldname</b>:  name of the addressed meta data table element<br/><b>selectexpr</b>:  expression selecting the elements to fetch for producing this feature<br/><b>tokenizer</b>:  tokenizer function description as list of strings (first element is the function name, the following elements are the parameters) to use for this feature<br/><b>normalizers</b>:  list of normalizer function descriptions as list of strings (first element is the function name, the following elements are the parameters) to use for this feature in the ascending order of appearance<br/></td><td valign="top" align="left">Define how a feature to insert as meta data is selected, tokenized and normalized.</td></tr><tr><td valign="top" align="left"><b>defineAttribute</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>attribname</b>:  name of the addressed attribute<br/><b>selectexpr</b>:  expression selecting the elements to fetch for producing this feature<br/><b>tokenizer</b>:  tokenizer function description as list of strings (first element is the function name, the following elements are the parameters) to use for this feature<br/><b>normalizers</b>:  list of normalizer function descriptions as list of strings (first element is the function name, the following elements are the parameters) to use for this feature in the ascending order of appearance<br/></td><td valign="top" align="left">Define how a feature to insert as document attribute (summarization) is selected, tokenized and normalized.</td></tr><tr><td valign="top" align="left"><b>analyze</b></td><td valign="top" align="left">Document</td><td valign="top" align="left"><b>content</b>:  content string (NOT a file name !) of the document to analyze<br/></td><td valign="top" align="left">Analye the content and return the document structure.</td></tr></table><h3>QueryAnalyzer</h3><p class="description">Analyzer object representing a set of functions for segmenting, tokenizing and normalizing a phrase into its atomic parts, that can be used for document retrieval.</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>definePhraseType</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>phraseType</b>:  name of the phrase type defined<br/><b>featureType</b>:  feature type name assigned to the features created by this phrase type<br/><b>tokenizer</b>:  tokenizer function description as list of strings (first element is the function name, the following elements are the parameters) to use for this phrase type<br/><b>normalizers</b>:  list of normalizer function descriptions as list of strings (first element is the function name, the following elements are the parameters) to use for this phrase type in the ascending order of appearance<br/></td><td valign="top" align="left">Defines a phrase type by name. Phrases can be passed together with this name to the query analyzer to get the terms for building query.</td></tr><tr><td valign="top" align="left"><b>analyzePhrase</b></td><td valign="top" align="left">Term[]</td><td valign="top" align="left"><b>phraseType</b>:  name of the phrase type to select analysis method<br/><b>phraseContent</b>:  content string of the phrase to analyze<br/></td><td valign="top" align="left">Tokenizes and normalizes a phrase and creates some typed terms out of it according the definition of the phrase type given.</td></tr></table><h3>StorageClient</h3><p class="description">Object representing a client connection to the storage .</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>nofDocumentsInserted</b></td><td valign="top" align="left">GlobalCounter</td><td valign="top" align="left"/><td valign="top" align="left">Get the global number of documents inserted into all storage nodes (of all nodes of the search index).</td></tr><tr><td valign="top" align="left"><b>insertDocument</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>docid</b>:  the identifier of the document to insert<br/><b>doc</b>:  the structure of the document to insert<br/></td><td valign="top" align="left">Prepare the inserting a document into the storage.</td></tr><tr><td valign="top" align="left"><b>deleteDocument</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>docid</b>:  the identifier of the document to delete<br/></td><td valign="top" align="left">Prepare the deletion of a document from the storage.</td></tr><tr><td valign="top" align="left"><b>deleteUserAccessRights</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>username</b>:  the name of the user to delete all access rights (in the local collection)<br/></td><td valign="top" align="left">Prepare the deletion of all document access rights of a user.</td></tr><tr><td valign="top" align="left"><b>flush</b></td><td valign="top" align="left">void</td><td valign="top" align="left"/><td valign="top" align="left">Commit all insert or delete or user access right change statements open.</td></tr><tr><td valign="top" align="left"><b>close</b></td><td valign="top" align="left">void</td><td valign="top" align="left"/><td valign="top" align="left">Close the storage client.</td></tr></table><h3>QueryEval</h3><p class="description">Query evaluation program object representing an information retrieval scheme for documents in a storage.</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>addTerm</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>set</b>:  identifier of the term set that is used to address the terms<br/><b>type</b>:  feature type of the of the term<br/><b>value</b>:  feature value of the of the term<br/></td><td valign="top" align="left">Declare a term that is used in the query evaluation as structural element without beeing part of the query (for example punctuation used for match phrases summarization).</td></tr><tr><td valign="top" align="left"><b>addSelectionFeature</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>set</b>:  identifier of the term set addressing the terms to use for selection<br/></td><td valign="top" align="left">Declare a feature set to be used as selecting feature.</td></tr><tr><td valign="top" align="left"><b>addRestrictionFeature</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>set</b>:  identifier of the term set addressing the terms to use as restriction<br/></td><td valign="top" align="left">Declare a feature set to be used as restriction.</td></tr><tr><td valign="top" align="left"><b>addExclusionFeature</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>set</b>:  identifier of the term set addressing the terms to use as exclusion<br/></td><td valign="top" align="left">Declare a feature set to be used as exclusion.</td></tr><tr><td valign="top" align="left"><b>addSummarizer</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>resultAttribute</b>:  name of the result attribute this summarization result is assigned to<br/><b>name</b>:  the name of the summarizer to add<br/><b>config</b>:  a list of named configuration options (implementation depending on language) of the summarizer to add.
	The values of the configuration options can be numeric or of type string. 
	Key identifiers starting with a dot '.' are declaring feature parameters.
	The names of the configuration key identifiers depend on the summarizer implementation.<br/></td><td valign="top" align="left">Declare a summarizer.</td></tr><tr><td valign="top" align="left"><b>addWeightingFunction</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>weight</b>:  additive weight of the document<br/><b>name</b>:  the name of weighting function to add<br/><b>config</b>:  a list of named configuration options (implementation depending on language) of the weighting function to add.
	The values of the configuration options can be numeric or of type string. 
	Key identifiers starting with a dot '.' are declaring feature parameters.
	The names of the configuration key identifiers depend on the weighting function implementation.<br/></td><td valign="top" align="left">Add a weighting function to use as summand of the total document weight.</td></tr><tr><td valign="top" align="left"><b>createQuery</b></td><td valign="top" align="left">Query</td><td valign="top" align="left"><b>storage</b>:  storage to execute the query on<br/></td><td valign="top" align="left">Create a query builder based on this query evaluation scheme.</td></tr></table><h3>Query</h3><p class="description">Object representing an instance of a query for documents in a storage.</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>pushTerm</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>type</b>:  query term type name<br/><b>value</b>:  query term value<br/></td><td valign="top" align="left">Push a single term on the stack.</td></tr><tr><td valign="top" align="left"><b>pushExpression</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>opname</b>:  name of the expression operator<br/><b>argc</b>:  number of operands (topmost elements from stack) of the expression<br/><b>range</b>:  span ot the expression in the document<br/></td><td valign="top" align="left">Create an expression from the topmost 'argc' elements of the stack, pop them from the stack and push the expression as single unit on the stack.</td></tr><tr><td valign="top" align="left"><b>pushDuplicate</b></td><td valign="top" align="left">void</td><td valign="top" align="left"/><td valign="top" align="left">Push a duplicate of the topmost element of the query stack.</td></tr><tr><td valign="top" align="left"><b>attachVariable</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>name</b>:  name of the variable attached<br/></td><td valign="top" align="left">Attaches a variable to the topmost expression or term on the query stack.</td></tr><tr><td valign="top" align="left"><b>defineFeature</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>name</b>:  name of the set that is used to address this feature<br/><b>weight</b>:  individual weight of this feature in the query<br/></td><td valign="top" align="left">Create a feature from the top element on the stack (and pop the element from the stack).</td></tr><tr><td valign="top" align="left"><b>defineMetaDataRestriction</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>compareOp</b>:  compare operator, one of "=","!=","&gt;=","&lt;=","&lt;","&gt;".<br/><b>name</b>:  name of the meta data field (left side of comparison operator)<br/><b>operand</b>:  numeric value to compare with the meta data field (right side of comparison operator)<br/><b>newGroup</b>:  true, if the restriction is not an alternative condition to the previous one defined (alternative conditions are evaluated as logical OR)<br/></td><td valign="top" align="left">Define a meta data restriction.</td></tr><tr><td valign="top" align="left"><b>setMaxNofRanks</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>maxNofRanks</b>:  maximum number of results to return by this query<br/></td><td valign="top" align="left">Set maximum number of ranks to return as query result.</td></tr><tr><td valign="top" align="left"><b>setMinRank</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>minRank</b>:  index of the first rank to be returned by this query<br/></td><td valign="top" align="left">Set the index of the first rank to be returned by this query.</td></tr><tr><td valign="top" align="left"><b>addUserName</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>username</b>:  an alternative name of a user for the evaluation of this query<br/></td><td valign="top" align="left">Add a user for this query (as alternative role).</td></tr><tr><td valign="top" align="left"><b>evaluate</b></td><td valign="top" align="left">Map[]</td><td valign="top" align="left"/><td valign="top" align="left">Evaluate this query and return the result. The result is a list of 
associative arrays. Some elements of the map of one result are hardcoded like "weight" and "docno".
The rest is defined by the summarizers used. </td></tr></table><h3>StrusContext</h3><p class="description">Object holding the global context of the strus information retrieval engine</p><h4>Methods</h4><table><tr><th width="10%" align="left">Name</th><th width="10%" align="left">Result</th><th width="30%" align="left">Arguments</th><th width="30%" align="left">Description</th></tr><tr><td valign="top" align="left"><b>loadModule</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>paths</b>:  semicolon separated list of module search paths<br/></td><td valign="top" align="left">Load a module</td></tr><tr><td valign="top" align="left"><b>addModulePath</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>paths</b>:  semicolon separated list of module search paths or single path<br/></td><td valign="top" align="left">Add a path from where to try to load modules from</td></tr><tr><td valign="top" align="left"><b>addResourcePath</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>paths</b>:  semicolon separated list of resource search paths or single path<br/></td><td valign="top" align="left">Add a path from where to try to load resources from</td></tr><tr><td valign="top" align="left"><b>createStorageClient</b></td><td valign="top" align="left">StorageClient</td><td valign="top" align="left"><b>config</b>:  configuration string of the storage client or empty, if the default remote storage of the RPC server is chosen<br/></td><td valign="top" align="left">Create a storage client instance</td></tr><tr><td valign="top" align="left"><b>createStorage</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>config</b>:  configuration string of the new storage<br/></td><td valign="top" align="left">Create a new storage (physically) described by config</td></tr><tr><td valign="top" align="left"><b>destroyStorage</b></td><td valign="top" align="left">void</td><td valign="top" align="left"><b>config</b>:  configuration string identifying the storage to destroy<br/></td><td valign="top" align="left">Destroy a storage (physically) described by config</td></tr><tr><td valign="top" align="left"><b>createDocumentAnalyzer</b></td><td valign="top" align="left">DocumentAnalyzer</td><td valign="top" align="left"><b>segmentername</b>:  name of the segmenter to use (if empty then the default segmenter is used)<br/></td><td valign="top" align="left">Create a document analyzer instance</td></tr><tr><td valign="top" align="left"><b>createQueryAnalyzer</b></td><td valign="top" align="left">QueryAnalyzer</td><td valign="top" align="left"/><td valign="top" align="left">Create a query analyzer instance</td></tr><tr><td valign="top" align="left"><b>createQueryAnalyzer</b></td><td valign="top" align="left">QueryEval</td><td valign="top" align="left"/><td valign="top" align="left">Create a query evaluation instance</td></tr></table></div></div></body></html>
